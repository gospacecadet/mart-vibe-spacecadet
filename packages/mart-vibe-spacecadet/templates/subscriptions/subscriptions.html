<template name="subscriptions">
  {{> dockingHistoryNav}}

  {{#if Template.subscriptionsReady}}
    {{> subscriptionsForbid}}
    <div class='p-a-3'>
      {{#if hasSubscriptions}}
        <div class="list-group">
          {{#each subscriptions}}
            {{> subscription}}
          {{/each}}
        </div>
      {{else}}
        <h4 class='text-xs-center'>
          You don't have any subscriptions.
          All monthly dockings become subscriptions and you can cancel them from this page.
        </h4>
      {{/if}}
    </div>
  {{else}}
    {{> loading}}
  {{/if}}

</template>

<template name="subscriptionsForbid">
</template>

<template name="subscription">
  <div class="list-group-item">
    <h4 class="list-group-item-heading">
      {{storefrontName}}
      {{#if isActive}}
        <span class="label label-pill label-success">ACTIVE</span>
      {{else}}
        <span class="label label-pill label-danger">CANCELLED</span>
      {{/if}}
    </h4>
    <h4 class="list-group-item-heading text-muted">{{productName}}</h4>
    <p class="list-group-item-text">Amount: {{money total}}</p>
    <p class="list-group-item-text">Next charge: {{dateSlashed nextChargeOn}}</p>

    {{#if isActive}}
      <button class='btn btn-danger cancel-subscription-button m-t-1 m-b-2'>Cancel Subscription</button>
    {{/if}}
  </div>
</template>
