<template name="spaceTop">
  <div class='row'>
    <div class="col-sm-4">
      {{> spaceTopImageAndButtons}}
    </div>
    <div class="col-md-8">
      {{> spaceTopName}}
      {{> spaceTopUnitSelection}}
      {{> spaceTopForUnit}}
    </div>
  </div>
</template>

<template name="spaceTopImageAndButtons">
  <img src="{{thumbnailUrl}}" alt="{{name}}" class='img img-fluid space-thumbnail img-rounded m-t-1'/>
  {{#if loggedIn}}
    {{#autoForm collection="Mart.LineItems" id="insertLineItemForm" type="insert"}}
      <fieldset>
        {{> afQuickField name='unit' type='hidden' value=currentUnit}}
        {{> afQuickField name='quantity' type='hidden' value=currentQuantity}}
        {{> afQuickField name='startAtDate' type='hidden' value=currentDate}}
        {{> afQuickField name='startAtHour' type='hidden' value=currentHour}}
        {{> afQuickField name='startAtMinute' type='hidden' value=currentMinute}}

        {{> afQuickField name='cartId' type='hidden' value="cartId"}}
        {{> afQuickField name='productId' type='hidden' value=_id}}
      </fieldset>
      <button type="submit" class="btn btn-primary m-t-1 btn-block btn-lg btn-wrap">Book this space</button>
      {{> thread senderId=userId recipientId=propertyOwnerId}}
      <button type="button" class="btn btn-gray-light m-t-1 btn-block p-y-1 btn-wrap" data-toggle="modal" data-target="#gridSystemModal">Direct message landlord</button>
    {{/autoForm}}
  {{else}}
    <button class="btn btn-primary m-t-1 btn-block btn-lg logged-out btn-wrap">Book this space</button>
    <button class="btn btn-gray-light m-t-1 btn-block logged-out p-y-1 btn-wrap">Direct message landlord</button>
  {{/if}}
</template>

<template name="spaceTopName">
  <h4 class="m-t-2">{{propertyName}}</h4>
  <h5>{{name}}</h5>
  <h6 class='text-muted'>{{propertyAddress}}</h6>
</template>
