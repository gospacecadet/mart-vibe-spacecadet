<template name="manageSpace">
  {{#if Template.subscriptionsReady}}
    {{#with space}}
      {{> manageSpaceForbid}}
      <a href="{{managePropertyPath storefrontId}}" class='btn btn-link'>&lt;&lt; Edit {{propertyName}}</a>
      {{#autoForm collection="Mart.Products" id="updateSpaceForm" type="update" doc=this}}
        {{> _spaceDetails}}
      {{/autoForm}}

      {{> manageSpacePrices}}

      {{> manageSpaceImages}}
      <hr class='m-y-2'>

      <button type="button" id="save-space" class="btn btn-outline-primary btn-lg btn-block">
        Save changes
      </button>

      {{#if isPublished}}
      <div class='row m-t-1'>
        <div class='col-xs-12 col-sm-9 m-t-1'>
          <button disabled class='btn btn-primary btn-lg btn-block'>
            <h4><strong>SPACE PUBLISHED</strong></h4>
            <h6 class='btn-wrap'>
              This space is published. Make sure that the property it belongs to is also published to start accepting bookings.
            </h6>
          </button>
        </div>

        <div class='col-xs-12 col-sm-3 m-t-1'>
          <button class="btn btn-danger btn-lg btn-block unpublish-space-button">
            UNPUBLISH
          </button>
        </div>
      </div>


      {{else}}
        {{#if canPublishSpace}}
          <button id="publish-space" class='btn btn-primary btn-lg btn-block m-t-1'>
            <h4><strong>Publish</strong></h4>
            <h6 class='btn-wrap'>
              This will make the space visible to the public and allow you to start accepting dockings
            </h6>
          </button>
        {{else}}
          <button disabled class='btn btn-primary btn-lg btn-block m-t-1'>
            <h4><strong>CANNOT PUBLISH</strong></h4>
            <h6 class='btn-wrap'>
              Space must have at least
              <strong>one price</strong> and at least
              <strong>one image</strong>
              before it can be published
            </h6>
          </button>
        {{/if}}
      {{/if}}

      <a href="{{managePropertyPath storefrontId}}" class='btn btn-link'>&lt;&lt; Edit {{propertyName}}</a>

    {{/with}}
  {{else}}
    {{> loading}}
  {{/if}}
</template>

<template name="manageSpaceForbid">

</template>
