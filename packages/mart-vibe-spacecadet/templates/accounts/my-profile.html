<template name="myProfile">
  <div class='m-y-2 row'>
    <div class="col-lg-8 col-lg-offset-2 col-xs-12">
      {{#if currentUser}}
      {{#autoForm schema="ProfileSchema" id="updateProfileForm" type="normal" resetOnSuccess=false}}

          {{#if username}}
            <fieldset disabled>
              {{> afQuickField name='username' value=username class='m-b-0 p-b-0'}}
            </fieldset>
          {{else}}
            <fieldset class='my-profile-username p-a-1 m-b-2'>
              {{> afQuickField name='username' value=username}}
              <span>This will be your permanent username. You will not be able to reset it.</span>
            </fieldset>
          {{/if}}


        <div class='row'>
          <div class='col-sm-6 col-xs-12'>
            {{> afQuickField name='email' type='email' value=email}}
          </div>
          <div class='col-sm-6 col-xs-12'>
            {{> afQuickField name='phoneNumber' value=phoneNumber}}
          </div>
        </div>

        <div class='row'>
          <div class='col-sm-6 col-xs-12'>
            {{> afQuickField name='firstName' value=firstName}}
          </div>
          <div class='col-sm-6 col-xs-12'>
            {{> afQuickField name='lastName' value=lastName}}
          </div>
        </div>

        {{#if canActAsMerchant}}
          {{> afQuickField name='businessName' value=businessName}}
        {{/if}}
        <button type="submit" class="btn btn-primary btn-lg btn-block m-t-3">Update Profile</button>
      {{/autoForm}}
      {{else}}
        {{> loading}}
      {{/if}}
    </div>
  </div>
</template>
