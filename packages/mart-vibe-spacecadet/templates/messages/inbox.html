<template name="inbox">
  {{#if Template.subscriptionsReady}}
    {{#if currentUser}}
      {{#if hasThreads}}
        <div class="row">
          <div class="col-lg-3 col-sm-4 col-xs-12 bg-gray-lightest p-t-1">
            {{> threads}}
          </div>
          <div class='col-lg-9 col-sm-8 col-xs-12 p-t-2'>
            {{#with currentThread}}
              <h4 class='text-xs-center m-b-2'>
                Conversation with {{recipientName}}&nbsp;&nbsp;
                <img src="{{_avatarUrl recipientId}}" alt="{{recipientName}} Picture" class='img-fluid thread-recipient-img img-circle'/>
              </h4>
              {{> thread}}
              <hr>
              {{> threadButtons}}
            {{/with}}
          </div>
        </div>
      {{else}}
        {{> emptyInbox}}
      {{/if}}
    {{else}}
      <div class='p-a-3'>
        {{> userLogin}}
      </div>
    {{/if}}
  {{else}}
    {{> loading}}
  {{/if}}
</template>

<template name="emptyInbox">
  <h4 class='m-t-3 m-x-3 text-xs-center'>
    Your inbox is empty.
    You will be notified by email if somebody sends you a message.
  </h4>
  <h4 class='m-t-1 m-b-3 m-x-3 text-xs-center'>
    To start a conversation yourself, go to one of your
    <a href="{{manageDockingsPath}}"> dockings</a> or go to a
    <a href="/">property</a> and send a message from there.
  </h4>
</template>
