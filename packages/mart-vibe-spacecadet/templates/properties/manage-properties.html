<template name="manageProperties">
<div class="container-fluid">
  <div class="row m-a-2 p-a-2">
    <div class="col-md-10 col-md-offset-1 white-box p-y-2">
      <h2>Manage Your Properties</h2>
      {{#each properties}}
        {{> managePropertyPreview}}
      {{/each}}
    </div>
  </div>
</div>
</template>

<template name="managePropertyPreview">
  <hr>
  <div class="row m-t-2">
    <div class="col-md-4">
      <a href="{{managePropertyPath _id}}">
        <img class="img-fluid" src="{{storefrontThumbnailUrl _id}}" alt="{{name}}">
      </a>
    </div>
    <div class='col-md-8'>
      <h4 class="media-heading">{{name}}</h4>
      {{description}}
      <br>
      <a href="{{managePropertyPath _id}}" class="btn btn-outline-primary m-t-2">Edit {{name}}</a>
    </div>
  </div>

  <div class="row p-t-2">
    <div class='col-md-8 col-md-offset-4'>

        {{#if addingSpace}}
          <h5>Rentable Spaces
            <button type="button" name="button" class="btn btn-outline-danger pull-right cancel-space-button">
              Cancel Space
            </button>
          </h5>
        {{else}}
          <div class="row">
            <div class='col-md-8 col-md-offset-4'>
              <h5>Rentable Spaces
                <button type="button" name="button" class="btn btn-secondary pull-right add-space-button">
                  Add A New Space
                </button>
              </h5>
            </div>
          </div>
        {{/if}}

      <hr class="m-b-2">
      {{#if addingSpace}}
        <div class="row m-b-2">
          {{#autoForm collection="Mart.Products" id="new-space-form" type="insert"}}
            <fieldset>
              {{> afQuickField name='name'}}
              {{> afQuickField name='description' type='textarea' rows=4}}
            </fieldset>
            <button type="submit" class="btn btn-primary btn-lg btn-block">Create Space</button>
            <p class="text-muted m-a-1">
              You will be able to continue editing before the Space is made visible to the public.
            </p>
          {{/autoForm}}
        </div>
      {{/if}}

      {{#each products}}
        {{> manageSpacePreview}}
      {{/each}}
    </div>
  </div>
</template>

<template name="manageSpacePreview">
  <div class="row m-b-3">
    <div class="col-md-4">
      <a href="{{manageSpacePath _id propertyId}}">
        <img class="img-fluid" src="{{productThumbnailUrl _id}}" alt="{{name}}">
      </a>
    </div>
    <div class='col-md-8'>
      <h6 class="media-heading"><strong>{{name}}</strong></h6>
      {{description}}
      <br>
      <a href="{{manageSpacePath _id propertyId}}" class="btn btn-outline-primary m-t-2">
        Edit {{name}}
      </a>
    </div>
  </div>
</template>
