<template name="manageProperty">
<div class="container-fluid">
  <div class="row m-a-2 p-a-2">
    <div class="col-md-10 col-md-offset-1 white-box p-y-2">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">
          <h3><strong>Edit &amp; Publish Property</strong></h3>
        </div>
      </div>
      <hr>
      {{#with property}}
        {{> managePropertyProducts}}
        {{> managePropertyDetails}}
      {{/with}}
    </div>
  </div>
</div>
</template>

<template name="managePropertyProducts">
  {{#if hasSpaces}}
    <span class="text-muted">Edit a space instead: </span>
    {{#each products}}
      <a href="{{manageSpacePath _id storefrontId}}">{{name}}</a> |
    {{/each}}
    <a href="#" class='btn btn-sm btn-outline-primary'>Add new space</a>
  {{/if}}
  <hr>
</template>

<template name="managePropertyDetails">
  {{#autoForm collection="Mart.Storefronts" id="updatePropertyForm" type="update" doc=this}}

    <fieldset>
      {{> _propertyFields}}
    </fieldset>

    {{> managePropertyImages}}

    <button type="submit" class="btn btn-primary btn-lg btn-block m-t-3">Save changes</button>
    <button id="publish-property" class='btn btn-primary-outline btn-lg btn-block m-t-1'>Publish</button>

  {{/autoForm}}
</template>

<template name="managePropertyImages">
  <div class="row m-t-2 p-b-2">
    <div class="col-md-2">
      <h4 class='text-xs-right'><strong>Step 3</strong></h4>
    </div>
    <div class="col-md-8">
      <h4 class='m-b-2'>Upload Property Images</h4>
      <p class='text-muted'>
        You may upload up to four photos.
        They will appear to the public in clockwise order.
      </p>
      <div class="row">
        {{#each numImagesAllowed}}
          <div class="col-md-6">
            {{> uploadPropertyImage index=index propertyId=_id }}
          </div>
        {{/each}}
      </div>
    </div>
  </div>
  <hr>
</template>
