<template name="manageProperties">
<div class="container-fluid">
  <div class="row">
    <div class="col-md-10 offset-md-1 p-y-2">
      <h2>
        Manage Your Properties
        {{#if hasProperties}}
          <a href="{{newPropertyPath}}" class="btn btn-secondary pull-right">
            New Property
          </a>
        {{/if}}
      </h2>
      {{#if Template.subscriptionsReady}}
        {{> managePropertiesForbid}}
        <div class='manage-properties'>
          {{#if hasProperties}}
            {{#each properties}}
              {{> managePropertyPreview}}
            {{/each}}
          {{else}}
            <h4 class='m-t-1'>
              You are not managing any properties yet,
              <a href="{{newPropertyPath}}"> add one.</a>
            </h4>
          {{/if}}
        </div>
      {{else}}
        {{> loading}}
      {{/if}}
    </div>
  </div>
</div>
</template>

<template name="managePropertyPreview">
  <hr>
  <div class="row m-t-2">
    <div class="col-md-4">
      <a href="{{managePropertyPath _id}}">
        <img class="img-fluid" src="{{storefrontThumbnailUrl _id}}" alt="{{name}}">
      </a>
    </div>
    <div class='col-md-8'>
      <h4 class="media-heading">{{name}}</h4>
      {{description}}
      <br>
      <a href="{{managePropertyPath _id}}" class="btn btn-outline-primary m-t-2">
        Edit {{name}}
      </a>
    </div>
  </div>

  <div class="row p-t-2">
    <div class='col-md-8 offset-md-4'>

      <div class="row">
        <div class='col-md-8 offset-md-4'>
          <h5>Rentable Spaces
            <a type="button" nclass="btn btn-secondary pull-right"
              href="{{newSpacePath _id}}">

              Add A New Space
            </a>
          </h5>
        </div>
      </div>

      <hr class="m-b-2">

      {{#if hasSpaces}}
        {{#each products}}
          {{> manageSpacePreview}}
        {{/each}}
      {{else}}
        <h4>You have not added any spaces to this property yet.</h4>
      {{/if}}
    </div>
  </div>
</template>

<template name="manageSpacePreview">
  <div class="row m-b-3">
    <div class="col-md-4">
      <a href="{{manageSpacePath _id propertyId}}">
        <img class="img-fluid" src="{{productThumbnailUrl _id}}" alt="{{name}}">
      </a>
    </div>
    <div class='col-md-8'>
      <h6 class="media-heading"><strong>{{name}}</strong></h6>
      {{description}}
      <br>
      <a href="{{manageSpacePath _id storefrontId}}" class="btn btn-outline-primary m-t-2">
        Edit {{name}}
      </a>
    </div>
  </div>
</template>

<template name="managePropertiesForbid">
</template>
